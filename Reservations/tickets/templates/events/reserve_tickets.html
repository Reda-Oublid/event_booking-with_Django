<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserve Tickets</title>
    <link rel="stylesheet" href="{% static 'css/reserve_tickets_styles.css' %}">
       <!-- Include Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>
    <h1>Reserve Tickets for {{ event.title }}</h1>

    <form id="reservationForm" action="{% url 'reserve_tickets' event.id %}" method="post">
        {% csrf_token %}
        <label for="{{ form.num_tickets.id_for_label }}">Number of Tickets:</label>
        <input type="number" id="numTickets" name="{{ form.num_tickets.html_name }}" onchange="calculateTotal()" min="1" step="1">
        <p id="totalPrice" class="total-price">Total Price: 0.00 DH</p>
        <button type="submit">Reserve Tickets</button>

    </form>

    <script>
        function calculateTotal() {
            const numTicketsInput = document.getElementById('numTickets');
            const totalPriceParagraph = document.getElementById('totalPrice');
            const pricePerTicket = {{ event.price }}; // Fetch price per ticket from server-side context

            // Calculate total price based on number of tickets and price per ticket
            const numTickets = parseInt(numTicketsInput.value);
            const total = numTickets * pricePerTicket;

            // Update total price display
            totalPriceParagraph.textContent = `Total Price: ${total.toFixed(2)} DH.`;
        }
    </script>
</body>
</html>


